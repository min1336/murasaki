<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>동적 애니메이션</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body, html {
            height: 100%;
            margin: 0;
            font-family: Arial, sans-serif;
            background-image: url('https://raw.githubusercontent.com/min1336/murasaki/main/background2.jpg'); /* 배경 이미지 설정 */
            background-size: cover;
            background-position: center;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        h1 {
            color: #333;
            text-align: center;
            position: absolute;
            top: 20px;
            width: 100%;
        }
        .mario {
            width: 7.5; /* 뷰포트의 너비에 따라 마리오 이미지 크기 조정 */
            position: absolute;
            bottom: 13vh; /* 뷰포트의 높이에 따라 마리오 이미지 위치 조정 */
            left: 50%; /* 가운데 정렬 */
            transform: translateX(-50%); /* 정확히 중앙에서 시작하도록 조정 */
            animation-name: jump;
            animation-duration: 0.7s;
            animation-timing-function: ease;
            animation-fill-mode: forwards;
        }
        @keyframes jump {
            0% { transform: translateX(-50%) translateY(0); }
            50% { transform: translateX(-50%) translateY(-15vh); } /* 뷰포트 높이에 따라 점프 높이 조정 */
            100% { transform: translateX(-50%) translateY(0); }
        }
        .coin {
            position: absolute;
            width: 50px; /* 코인의 크기 */
            animation: floatUp 1.3s ease-out forwards, spin 1s infinite linear; /* 코인 상승 및 회전 애니메이션 */
        }
        @keyframes floatUp {
            0% { bottom: 40vh; opacity: 1; }
            100% { bottom: 53vh; opacity: 0; }
        }
        @keyframes spin {
            from { transform: rotateY(0deg); }
            to { transform: rotateY(360deg); }
        }
    </style>
</head>
<body>
    <img src="https://raw.githubusercontent.com/min1336/murasaki/main/mario_stay.png" class="mario" id="marioImage">

    <script>
        const mario = document.getElementById('marioImage');
        function triggerJump() {
            mario.src = 'https://raw.githubusercontent.com/min1336/murasaki/main/mario_jump.png'; // 점프 이미지로 변경
            mario.style.animation = 'none';
            mario.offsetHeight; // Trigger reflow
            mario.style.animation = null; 
            createCoin(); // 코인 생성 함수 호출
            mario.addEventListener('animationend', resetImage); // 애니메이션 끝나면 이미지 리셋
        }

        function resetImage() {
            mario.src = 'https://raw.githubusercontent.com/min1336/murasaki/main/mario_stay.png'; // 원래 이미지로 복원
            mario.removeEventListener('animationend', resetImage); // 이벤트 리스너 제거
        }

        function createCoin() {
            const coin = document.createElement('img');
            coin.src = 'https://raw.githubusercontent.com/min1336/murasaki/main/coin.png';
            coin.classList.add('coin');
            coin.style.left = '47.8%'; // 가운데 정렬
            document.body.appendChild(coin);

            // 코인 애니메이션 후 삭제
            coin.addEventListener('animationend', () => {
                if (coin.style.opacity === '0') { // 애니메이션 끝에서 투명도가 0일 때 삭제
                    coin.remove();
                }
            });
        }

        mario.addEventListener('click', triggerJump);
    </script>
</body>
</html>
