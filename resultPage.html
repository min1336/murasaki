<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Result Page</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* 차트의 크기를 조정하는 CSS */
        #radarChart {
            width: 500px !important; /* 화면에 표시되는 너비 */
            height: 500px !important; /* 화면에 표시되는 높이 */
        }
        #lineChart {
            width: 500px !important; /* 화면에 표시되는 너비 */
            height: 500px !important; /* 화면에 표시되는 높이 */
        }
        #barChart {
            width: 500px !important; /* 화면에 표시되는 너비 */
            height: 500px !important; /* 화면에 표시되는 높이 */
        }
    </style>
</head>
<body>
    <h1>Result Page</h1>
    <div id="result-display"></div>
    <canvas id="radarChart" width="400" height="400"></canvas>
    <canvas id="lineChart" width="400" height="400"></canvas>
    <canvas id="barChart" width="400" height="400"></canvas>

    <script>
        const scores = ['love', 'joy', 'peace', 'patience', 'kindness', 'goodness', 'faithfulness', 'gentleness', 'selfControl'];
        const resultDisplay = document.getElementById("result-display");

        let totalNextPageScore = 0;
        let totalThirdPageScore = 0;

        // 합산 점수를 저장할 배열 초기화
        const totalScores = [];

        for (const score of scores) {
            const nextpageScoreValue = parseInt(sessionStorage.getItem(`nextpage_${score}Score`)) || 0;
            const thirdpageScoreValue = parseInt(sessionStorage.getItem(`thirdpage_${score}Score`)) || 0;
            const totalScore = nextpageScoreValue + thirdpageScoreValue;

            totalScores.push(totalScore);

            // Display each score
            const scoreElement = document.createElement("p");
            scoreElement.textContent = `${score} 점수: ${nextpageScoreValue} (nextpage) + ${thirdpageScoreValue} (thirdpage) = ${totalScore}`;
            resultDisplay.appendChild(scoreElement);

            totalNextPageScore += nextpageScoreValue;
            totalThirdPageScore += thirdpageScoreValue;
        }

        // 합산 점수를 이용한 9각형 그래프 생성
        const ctx = document.getElementById("radarChart").getContext("2d");
        new Chart(ctx, {
            type: "radar",
            data: {
                labels: scores,
                datasets: [
                    {
                        label: "Total Combined Scores",
                        data: totalScores,
                        backgroundColor: "rgba(75, 192, 192, 0.2)",
                        borderColor: "rgba(75, 192, 192, 1)",
                        borderWidth: 1
                    }
                ]
            },
            options: {
                scales: {
                    r: {
                        beginAtZero: true,
                        max: 10 // 최대 점수를 10으로 설정 (각 항목이 1~5점인 경우)
                    }
                }
            }
        });

        const rtx = document.getElementById("lineChart").getContext("2d");
        new Chart(rtx, {
            type: "line",
            data: {
                labels: scores,
                datasets: [
                    {
                        label: "Total Combined Scores",
                        data: totalScores,
                        backgroundColor: "rgba(75, 192, 192, 0.2)",
                        borderColor: "rgba(75, 192, 192, 1)",
                        borderWidth: 1
                    }
                ]
            },
            options: {
                scales: {
                    r: {
                        beginAtZero: true,
                        max: 10 // 최대 점수를 10으로 설정 (각 항목이 1~5점인 경우)
                    }
                }
            }
        });
        const mtx = document.getElementById("barChart").getContext("2d");
        new Chart(mtx, {
            type: "bar",
            data: {
                labels: scores,
                datasets: [
                    {
                        label: "Total Combined Scores",
                        data: totalScores,
                        backgroundColor: "rgba(75, 192, 192, 0.2)",
                        borderColor: "rgba(75, 192, 192, 1)",
                        borderWidth: 1
                    }
                ]
            },
            options: {
                scales: {
                    r: {
                        beginAtZero: true,
                        max: 10 // 최대 점수를 10으로 설정 (각 항목이 1~5점인 경우)
                    }
                }
            }
        });
    </script>
</body>
</html>
